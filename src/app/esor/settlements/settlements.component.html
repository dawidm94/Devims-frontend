<section *ngIf="!timetable">
  <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    <h3 *ngIf="isLongLoading">Jak doszły nowe mecze, ładowanie trwa troszkę dłużej.</h3>
  <section *ngIf="isVeryLongLoading">
    <h3>... a za pierwszym razem jeszcze dłużej :) - spokojnie - to tylko raz.</h3>
  </section>
</section>
<div *ngIf="timetable" style="text-align: center">
  <h1 class="inline" style="text-align: center; font-weight: bold">Rozliczenia</h1>
  <mat-icon style="padding-left: 5px" color="primary" matTooltipClass="info-tooltip" matTooltip="Kontroluj przelewy od klubów za wszystkie mecze. Każdy mecz będzie pojawiać się dzień po rozegraniu. Uwaga - automatyczne zapisywanie przy każdorazowej zmianie. Nie musisz nic klikać dodatkowego :)" matTooltipPosition="right">
    info
  </mat-icon>
</div>
<table *ngIf="timetable" mat-table [dataSource]="timetable" class="mat-elevation-z8">
  <!-- Position Column -->
  <ng-container matColumnDef="position" >
    <th mat-header-cell *matHeaderCellDef> Lp. </th>
    <td mat-cell *matCellDef="let element; let i = index">{{i + 1}}.</td>
  </ng-container>

  <!-- matchInfo Column -->
  <ng-container matColumnDef="league">
    <th mat-header-cell *matHeaderCellDef> Liga </th>
    <td mat-cell *matCellDef="let timetable"> {{timetable.match.league}}</td>
  </ng-container>

  <!-- matchTeams Column -->
  <ng-container matColumnDef="matchTeams">
    <th mat-header-cell *matHeaderCellDef> Mecz </th>
    <td mat-cell *matCellDef="let timetable"> {{timetable.match.teamHome}} - {{timetable.match.teamVisitor}} </td>
  </ng-container>

  <!-- date Column -->
  <ng-container matColumnDef="date">
    <th mat-header-cell *matHeaderCellDef> Data meczu </th>
    <td mat-cell *matCellDef="let timetable"> {{timetable.match.date}} {{timetable.match.time}} </td>
  </ng-container>

  <!-- Actions  Column -->
  <ng-container matColumnDef="paid">
    <th mat-header-cell *matHeaderCellDef> Zapłacono </th>

    <td mat-cell *matCellDef="let timetable"><mat-checkbox color="primary" [(ngModel)]="timetable.settlement.paid" (change)="updateSettlements()"></mat-checkbox></td>
  </ng-container>

  <!-- matchInfo Column -->
  <ng-container matColumnDef="toPay">
    <th mat-header-cell *matHeaderCellDef> Kwota </th>
    <td mat-cell *matCellDef="let timetable"> {{timetable.settlement.toPay}} zł</td>
  </ng-container>

  <!-- Comment  Column -->
  <ng-container matColumnDef="comment">
    <th mat-header-cell *matHeaderCellDef style="text-align: center !important">
      Komentarz
      <sup class="inline">
        <mat-icon class="help-icon" color="primary" matTooltip="Np. Data zapłaty / Nr delegacji / Gotówka czy przelew?" matTooltipPosition="right">
          help
        </mat-icon>
      </sup>
    </th>
    <td class=""  mat-cell *matCellDef="let timetable">
      <mat-form-field appearance="standard">
              <textarea matInput [(ngModel)]="timetable.settlement.comment" placeholder="<brak uwag>" rows="1" maxlength="255" (blur)="updateSettlements()"></textarea>
      </mat-form-field>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>
